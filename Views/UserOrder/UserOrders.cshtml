@model IEnumerable<Order>


@{
}
<div style=" width:100%" class="mt-2">

    

    <h4>My Orders</h4>
    @if (Model != null && Model.Count()>0)
    {
        <table class="table table-bordered">
            <tr>
                <th> OrderDate</th>
                <th> OrderStatus</th>   
                
            </tr>
             @foreach (var order in Model)
        {
           <tr>
               <td>@order.CreateDate.ToString("dd-MM-yyyy")</td>
               <td>@order.OrderStat.StatName</td>
             
           </tr>
                @if (order.OrderDetail != null && order.OrderDetail.Count > 0)
                {
                    <tr>
                        <td>TOTAL: </td>
                        <td>@(order.OrderDetail.Select(item => item.Product.Price * item.Quantity).Sum())</td>
                    </tr>
                
                <tr>
               <td>
                        <table class="table table-striped">
                            <tr>
                                <th>Product</th>
                                <th>Image</th>
                                <th>Unit Price(INT)</th>
                                <th>Total Price</th>
                            </tr>


                            @foreach (var item in order.OrderDetail)

                            {
                                   
                                <tr>
                                    <td>@item.Product.ProductName</td>
                                    <td>
                                        @if (string.IsNullOrEmpty(item.Product.Image))
                                        {
                                            <img src="/img/noimage.jpg" style="width:80px; height:100px" />
                                        }

                                        else

                                        {
                                            <img src="/img/@item.Product.Image" style="width:80px; height:100px" />
                                        }
                                    </td>

                                    <td>
                                        @item.Product.Price X @item.Quantity
                                    </td>

                                    <td>
                                        @(item.Product.Price* item.Quantity)
                                    </td>

                                </tr>

                                    
                            }

                        </table>
               </td>
           </tr>

        }
        }

        </table>


        <a href="/Identity/Account/Manage" class="btn btn-dark m-2">Back</a>

       





    }

    else
    {
        <h5>No Orders</h5>
    }




</div>

